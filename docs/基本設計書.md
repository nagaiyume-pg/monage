# 基本設計書

## ファイル構成

### ファイル構成図

```
/kakeibo-app/
│
├── /app/                           # アプリケーション本体
│   ├── /controllers/              # コントローラー
│   │   ├── ExpenseController.php
│   │   ├── UserController.php
│   │   └── AuthController.php
│   │
│   ├── /models/                   # モデル（DB操作）
│   │   ├── Expense.php
│   │   ├── User.php
│   │   └── Category.php
│   │
│   ├── /views/                    # 表示テンプレート
│   │   ├── /expenses/
│   │   │   ├── index.php
│   │   │   ├── create.php
│   │   │   └── edit.php
│   │   ├── /layouts/
│   │   │   ├── header.php
│   │   │   ├── footer.php
│   │   │   └── main.php
│   │   └── /auth/
│   │       ├── login.php
│   │       └── register.php
│   │
│   ├── /helpers/                  # 共通関数（例：日付フォーマット、バリデーション）
│   │   ├── auth_helper.php
│   │   └── date_helper.php
│   │
│   ├── /middlewares/              # ミドルウェア（認証チェックなど）
│   │   └── AuthMiddleware.php
│   │
│   └── /routes/                   # ルーティング定義（URLとコントローラの紐づけ）
│       └── web.php
│
├── /public/                       # Webサーバからアクセスされる公開ディレクトリ
│   ├── /css/
│   ├── /js/
│   ├── /images/
│   └── index.php                  # エントリーポイント（フロントコントローラー）
│
├── /config/                       # 設定ファイル
│   ├── app.php
│   └── database.php
│
├── /core/                         # フレームワーク的基盤コード
│   ├── App.php                    # アプリケーション初期化
│   ├── Controller.php             # ベースコントローラ
│   ├── Model.php                  # ベースモデル
│   ├── Router.php                 # ルーティング処理
│   └── View.php                   # ビュー描画処理
│
├── /storage/                      # ログや一時ファイル
│   ├── /logs/
│   │   └── error.log
│   └── /uploads/
│
├── /tests/                        # テストコード（PHPUnitなど）
│   ├── /Feature/
│   └── /Unit/
│
├── .env                           # 環境変数（DB接続・パスワードなど）※ Git管理外に
├── .gitignore
├── composer.json                  # Composer設定（使うなら）
└── README.md
```

### 各ディレクトリの役割一覧表

| ディレクトリ   | 内容                                                               |
| -------------- | ------------------------------------------------------------------ |
| `controllers/` | ユーザー操作ごとの処理を担当。`ExpenseController.php` など         |
| `models/`      | 各データ（支出・ユーザー・カテゴリなど）のデータベース操作を定義   |
| `views/`       | HTML表示テンプレート。レイアウト共通部は `layouts/` に分けて共通化 |
| `helpers/`     | バリデーションやフォーマットなど再利用関数                         |
| `middlewares/` | 認証・アクセス制御など                                             |
| `routes/`      | URLルーティング定義ファイル。フレームワーク風に分離                |
| `core/`        | MVCを支える中核コード（Router、Modelの親クラスなど）               |
| `public/`      | ブラウザに見える唯一のフォルダ。HTMLや静的ファイルもここに         |
| `config/`      | アプリ設定（DB接続、パスなど）                                     |
| `storage/`     | 一時ファイル、ログ、アップロードファイルなどの保存先               |
| `tests/`       | 単体テストや機能テスト（オプション）                               |